<!DOCTYPE html>
<html>
	<head>
		<!-- Production (un-minified) -->
		<script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
		<script type = "text/javascript">
			  console.log(solanaWeb3);	//import * as solanaWeb3 from '@solana/solanaWeb3.js';
			  (async () => {
			  console.log("connecting with solana cluster...");
			  // Connect to cluster
			  var connection = new solanaWeb3.Connection(
			    solanaWeb3.clusterApiUrl('devnet'),
			    'confirmed',
			  );
		          document.getElementById("connection").innerHTML="Connection with Solana Cluster ready!";
			  console.log("Connection with Solana Cluster ready!"); 
		          console.log("connection:");
			  console.log(connection);

			  // Generate a new wallet keypair and airdrop SOL
			  var wallet = solanaWeb3.Keypair.generate();
			  console.log("wallet:");
		          console.log(wallet);
			  var airdropSignature = await connection.requestAirdrop(
			    wallet.publicKey,
			    solanaWeb3.LAMPORTS_PER_SOL,
			  );

			  //wait for airdrop confirmation
			  await connection.confirmTransaction(airdropSignature);

			  // get account info
			  // account data is bytecode that needs to be deserialized
			  // serialization and deserialization is program specic
			  let account = await connection.getAccountInfo(wallet.publicKey);
			  console.log(account);
			  console.log(account.lamports);
		          var printweb = `<p>your wallet: ${wallet.publicKey} </p>`;
		          printweb += `<p>your credit in lamports: ${account.lamports} </p>`;
			  document.getElementById("result").innerHTML=printweb;
			})();	
		</script>
	</head>
	<body>
		<h1> Testing solanaWeb3 Solana on devnet</h1>
		<h3 >Connection</h3>
		<p id="connection">Waiting for conneciton</p>
		<h3 id="createWallet"> Create wallet </h3>
		<h3 id="airdrop"> Airdrop </h3>
		<h3 id="send">Send</h3>
		<h3 id="receive">Receive</h3>
		

		<p id="result"></p>
	</body>
	<footer>
	</footer>
</html>
